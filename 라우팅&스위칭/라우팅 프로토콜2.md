## 라우팅 프로토콜 EIGRP(시스코)

- 시스코에서 만든 시스코 전용 라우팅 프로토콜
- Distance Vetor + Link-State 합친 하이브리드 방식
- RIP과 동일하게 Split-Horizon이 적용되고, Major 네트워크 경계에서 auto-summary가 된다.
- IGRP가 발전된 프로토콜
- DUAL(Diffusing Update Algorithm)을 사용하여 최적의 경로와 후속 경로를 추출!!
- Convergence time이 빠르다.
- AD값은 내부 90이고 외부 170 (RIP는 AD가 120이다.)
- 내부와 외부를 구분하는 AS(Autonomous System) 인데 AS란 하나의 네트워크 관리자에 의해 관리되는 라우터 집단. 쉽게 말해 한회사에서 관리하는 라우터들.
근데 전세계 라우터를 한회사에서 관리하지 않고, 여러 회사에서 나눠서 관리하는데 그 단위가 AS 넘버 단위이다. 어떤 한회사에서 EIGRT로 정보공유받으면 이건 내부이고 다른 회사에서 관리
되는 라우터로 부터 정보 받으면 외부 AD로 인식한다.
- 이놈도 classless여서 서브넷팅된것을 정확히 인식 할 수 있다.
- Unequal cost 부하분산(로드 밸런싱) 지원 (RIP나 OSPF는 equal cost 부하분산까진 해줌)
- 단점으로는 중,소규모 네트워크에서는 잘 돌아가지만 대규머 네트워크에서는 관리가 힘들다 요청은하고 답변을 하염없이 기다리는 SIA현상이 발생할 수 있다.

**동작 과정**
1) Hello packet을 인접 Router가 서로 교환한 후 Neighbor 관계를 맺고 Neighbor table을 생성한다.
2) Update packet을 통해 라우팅 정보를 교환하고 Topology table을 생성한다.
3) Topology table 정보를 종합해서 라우팅 경로를 계산하고 Best path를 Routing table에 저장한다.

**특정 네트워크로 가는 경로 또는 인접 Router가 다운되었을때 **
1) Query packet으로 다운된 네트워크의 라우팅 정보 요청 및 응답상태 테이블 생성
2) Reply packet으로 라우팅 정보 수신 및 Topology table 저장
3) 수신한 라우팅 정보들로 라우팅 경로를 계산하고 Best path를 Routing table에 저장한다.

**메트릭 계산에 사용되는 값으로는 대역폭, 지연, 신뢰성, 부하, MTU을 사용한다.**

EIGRP의 라우팅 설정하는 방법도 간단하다.라우터 하나로 예를 들어보면 R1에서 conf t모드 -> router eigrp (AS 주소) -> no auto-summary -> (자기가 알고 있는 네트웍대역) network 211.
100.10.4 0.0.0.3 (여기서 서브넷마스크가 아니라 **와일드마스크(서브넷에서 1이 여기선 0)로 광고함**)



## 동적 라우팅 프로토콜 OSPF

- Link-State 라우팅 프로토콜 (링크 상태까지 따진다)
- Classless여서 서브넷까지 다 생각한다.
- Metric은 cost 사용(cost는 10의8 / Bandwidth(bps) )
- Multicast를 이용해서 정보를 전달한다.
- AD값은 110이다.
- SPF(Shortest path First)또는 Dijkstra 알고리즘을 이용해서 각 목적지까지의 최적 경로를 계산
- OSPF는 area 단위로 구성 ( 대규모 네트워크를 안정되게 운영할 수 있다.)
- Stub이라는 강력한 축약 기능이 있다.
- 네트워크 종류에 따라 동작하는 방식과 설정이 다르다.
- 라우팅 정보 계산 및 유지를 위해서 CPU,RAM같은 자원을 많이 사용한다.


!!!깜짝 정리!!!
               AD
직접 연결       0
정적(출구)      0
정적(상대IP)    1
EIGRP(내부)     90
OSPF           110
RIP            120
EIGRP(외부)    170

이놈은 라우터ID를 가지고 있다.

**동작과정**
1) OSPF를 설정한 Router끼리 Hello packet을 교환해서 Neighbor혹은 adjancent Neighbor를 맺는다
* adjancent Neighbor => 라우팅 정보(LSA)를 교환하는 네이버
* LSA(Link State Advertisement) => OSPF에서의 라우팅 정보
2) adjancent 네이버인 Router간 라우팅 정보(LSA)를 서로 교환, 전송받은 LSA를 Link-State DataBase에 저장.
3) LSA를 모두 교환하고 SPF(Shortest Path First)또는 다익스트라 알고리즘을 이용해서 각 목적지까지의 최적 경롤르 계산후 Routing table에 올린다.
4) 그 후에도 주기적으로 Hello packet을 교환하면서 정상 동작을 확인
5) 네트워크 상태가 변하면 다시 위의 과정을 반복해서 Routing table을 생성



