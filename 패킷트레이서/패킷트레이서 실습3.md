## VLAN

- 물리적 배치와 상관없이 논리적으로 LAN을 구성
- LAN을 구성한느 장치들이 꼭 같은 장소에 있을 필요가 없다.
- 서로 다른 VLAN은 직접적으로 연결되었더라도 (ip주소자체가 다른거임) 통신이 불가. => 보안성 향상
- 다른 VLAN의 장치가 통신하려면 반드시 Layer3 장치의 중계를 거쳐야 한다.

![vlan](https://user-images.githubusercontent.com/67897827/158227608-d34afb74-7ec3-4165-9ddd-02eaf8ae4882.PNG)

스위치)
conf t -> vlan 10 -> name VLAN_10 -> exit
이렇게 20과30 2개더 만들기
**!! VLAN을 만들후 포트를 VLAN으로 옮겨주기**
하나 예를 들어보면 스위치에서 conf t -> int fa0/1 -> switchport mode access(sw m a써도됨) -> switchport access vlan 10 (sw a v 10이라 써도됨)

## inter VLAN
- Trunk의 개념 : vlan이 나눠져있다고 나눠진만큼 전용회선으로 가는게 아니라 물리적으로 하나의 회선만 사용
스위치에 하나의 포트를 지정하고, 그 포트에 여러 VLAN 프레임이 전달되도록 한다.
트렁크 프로토콜로 첫번째 802.1Q(IEEE표준):이놈은 지원하는 VLAN의 개수는 4096개 이며 호환성이 좋다. 두번째로 ISL(시스코전용)이 있는데
이놈은 지원하는 VLAN 개수가 1000개이다.
**트렁크가 필요한 곳은 스위치와 스위치가 연결되는 구간(VLAN 나눠져있으면) 또는 스위치와 라우터가 연결되는 구간에 설정되어야 한다.**

만약에, vlan이 다른 놈들을 스위치에 묶고 그놈과 라우터가 연결되어있다 가정했을때, 하나의 pc에서 게이트웨이 주소 입력해야 될텐데 이놈들은 vlan이 다르기에 다른 놈들은 1개의 같은 라우터에다 기본 게이트웨이 주소를 똑같이 입력할 수없다(물리적으로 라우터에 defaut-gateway 역활을 할수 있는 포트는 1개밖에 없기때문에) 때문에 라우터에서 우선 인터페이스를 활성화하고 가상에 인터페이스를 만들어 주어야 한다.

![inter VLAN](https://user-images.githubusercontent.com/67897827/158424513-e7701d35-c948-4cd9-972f-60bf38972c59.PNG)

라우터에서)
conf t -> int fa0/0 -> no shut -> exit -> int fa0/0.10(10은 VLAN10에 가상 인터페이스 연결할거다) -> encapsulation dot1Q 10(encapsulation 통해 라우터에서 어떤 프로토콜 쓸건지 선언 10은 반드시 vlan 숫자) -> ip add 200.200.200.1 255.255.255.0(vlan 10대역에서 기본 게이트웨이 ip인 200.200.200.1입력)
이 것을 vlan개수 만큼 반복 (활성화는 한번만 해주면 된다. 뒤에 할 가상 인터페이스 만드는것은 그냥 바로 int gi0/0/0.20이렇게 바로 왜? gi0/0/0 앞에서 활성화 해줬음)
또 실제 라우터와 연결된 오른쪽 부분의 ip넣는 것도 잊지 않기!!

또 vlan 이 다른pc에서 기본 게이트웨이 입력할때 그 네트워크대역에서 제일 작은걸로 예를들어 200.200.200.1 이렇게

정리하면 위 그림에
1. 각각 ip 주기(기본 게이트웨이 줄때는 그 대역때 젤 낮은값)
2. 라우터에서 가상 인터페이스 연결(위처럼 먼저 활성화하고)
3. 스위치에서 VLAN설정 ( conf t-> vlan 10 -> name VLAN_10 이렇게 vlan다 만들어주기-> 다시 스위치들어가서 각 인터페이스마다 넌 vlan몇번이야 예)int fa0/3 -> sw m a-> sw a v 10
이렇게 다 해주기 물론 오른쪽도 해주기!!
4. 라우터와스위치, 스위치 스위치는 트렁크 설정
스위치 왼쪽꺼 들어가서 트렁크 설정 int fa0/2 ->switchport mode trunk 오른쪽도
**주의 할것이 스위치와 라우터 연결된 부분도 다 트렁크 설정 해주기**
